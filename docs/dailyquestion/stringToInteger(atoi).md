---
title: 8.å­—ç¬¦ä¸²è½¬æ¢æ•´æ•° (atoi)
toc: content
tocDepth: 4
---

## é¢˜ç›®

### é¢˜ç›®éš¾åº¦ï¼šğŸ”¥ğŸ”¥ ä¸­ç­‰

è¯·ä½ æ¥å®ç°ä¸€ä¸ªÂ myAtoi(string s)Â å‡½æ•°ï¼Œä½¿å…¶èƒ½å°†å­—ç¬¦ä¸²è½¬æ¢æˆä¸€ä¸ª 32 ä½æœ‰ç¬¦å·æ•´æ•°ï¼ˆç±»ä¼¼ C/C++ ä¸­çš„ atoi å‡½æ•°ï¼‰ã€‚

å‡½æ•°Â `myAtoi(string s)` çš„ç®—æ³•å¦‚ä¸‹ï¼š

1. è¯»å…¥å­—ç¬¦ä¸²å¹¶ä¸¢å¼ƒæ— ç”¨çš„å‰å¯¼ç©ºæ ¼
2. æ£€æŸ¥ä¸‹ä¸€ä¸ªå­—ç¬¦ï¼ˆå‡è®¾è¿˜æœªåˆ°å­—ç¬¦æœ«å°¾ï¼‰ä¸ºæ­£è¿˜æ˜¯è´Ÿå·ï¼Œè¯»å–è¯¥å­—ç¬¦ï¼ˆå¦‚æœæœ‰ï¼‰ã€‚ ç¡®å®šæœ€ç»ˆç»“æœæ˜¯è´Ÿæ•°è¿˜æ˜¯æ­£æ•°ã€‚ å¦‚æœä¸¤è€…éƒ½ä¸å­˜åœ¨ï¼Œåˆ™å‡å®šç»“æœä¸ºæ­£ã€‚
3. è¯»å…¥ä¸‹ä¸€ä¸ªå­—ç¬¦ï¼Œç›´åˆ°åˆ°è¾¾ä¸‹ä¸€ä¸ªéæ•°å­—å­—ç¬¦æˆ–åˆ°è¾¾è¾“å…¥çš„ç»“å°¾ã€‚å­—ç¬¦ä¸²çš„å…¶ä½™éƒ¨åˆ†å°†è¢«å¿½ç•¥ã€‚
4. å°†å‰é¢æ­¥éª¤è¯»å…¥çš„è¿™äº›æ•°å­—è½¬æ¢ä¸ºæ•´æ•°ï¼ˆå³ï¼Œ"123" -> 123ï¼Œ "0032" -> 32ï¼‰ã€‚å¦‚æœæ²¡æœ‰è¯»å…¥æ•°å­—ï¼Œåˆ™æ•´æ•°ä¸º 0 ã€‚å¿…è¦æ—¶æ›´æ”¹ç¬¦å·ï¼ˆä»æ­¥éª¤ 2 å¼€å§‹ï¼‰ã€‚
5. å¦‚æœæ•´æ•°æ•°è¶…è¿‡ 32 ä½æœ‰ç¬¦å·æ•´æ•°èŒƒå›´ [âˆ’231,Â  231Â âˆ’ 1] ï¼Œéœ€è¦æˆªæ–­è¿™ä¸ªæ•´æ•°ï¼Œä½¿å…¶ä¿æŒåœ¨è¿™ä¸ªèŒƒå›´å†…ã€‚å…·ä½“æ¥è¯´ï¼Œå°äº âˆ’231 çš„æ•´æ•°åº”è¯¥è¢«å›ºå®šä¸º âˆ’231 ï¼Œå¤§äº 231Â âˆ’ 1 çš„æ•´æ•°åº”è¯¥è¢«å›ºå®šä¸º 231Â âˆ’ 1 ã€‚
6. è¿”å›æ•´æ•°ä½œä¸ºæœ€ç»ˆç»“æœã€‚
**æ³¨æ„ï¼š**

- æœ¬é¢˜ä¸­çš„ç©ºç™½å­—ç¬¦åªåŒ…æ‹¬ç©ºæ ¼å­—ç¬¦ `' '` ã€‚
- é™¤å‰å¯¼ç©ºæ ¼æˆ–æ•°å­—åçš„å…¶ä½™å­—ç¬¦ä¸²å¤–ï¼Œ**è¯·å‹¿å¿½ç•¥** ä»»ä½•å…¶ä»–å­—ç¬¦ã€‚

### ç¤ºä¾‹Â 1

```bash
è¾“å…¥ï¼šs = "42"
è¾“å‡ºï¼š42
è§£é‡Šï¼šåŠ ç²—çš„å­—ç¬¦ä¸²ä¸ºå·²ç»è¯»å…¥çš„å­—ç¬¦ï¼Œæ’å…¥ç¬¦å·æ˜¯å½“å‰è¯»å–çš„å­—ç¬¦ã€‚
ç¬¬ 1 æ­¥ï¼š"42"ï¼ˆå½“å‰æ²¡æœ‰è¯»å…¥å­—ç¬¦ï¼Œå› ä¸ºæ²¡æœ‰å‰å¯¼ç©ºæ ¼ï¼‰
         ^
ç¬¬ 2 æ­¥ï¼š"42"ï¼ˆå½“å‰æ²¡æœ‰è¯»å…¥å­—ç¬¦ï¼Œå› ä¸ºè¿™é‡Œä¸å­˜åœ¨ '-' æˆ–è€… '+'ï¼‰
         ^
ç¬¬ 3 æ­¥ï¼š"42"ï¼ˆè¯»å…¥ "42"ï¼‰
           ^
è§£æå¾—åˆ°æ•´æ•° 42 ã€‚
ç”±äº "42" åœ¨èŒƒå›´ [-231, 231 - 1] å†…ï¼Œæœ€ç»ˆç»“æœä¸º 42 ã€‚
```

### ç¤ºä¾‹Â 2

```bash
è¾“å…¥ï¼šs = "   -42"
è¾“å‡ºï¼š-42
è§£é‡Šï¼š
ç¬¬ 1 æ­¥ï¼š"   -42"ï¼ˆè¯»å…¥å‰å¯¼ç©ºæ ¼ï¼Œä½†å¿½è§†æ‰ï¼‰
            ^
ç¬¬ 2 æ­¥ï¼š"   -42"ï¼ˆè¯»å…¥ '-' å­—ç¬¦ï¼Œæ‰€ä»¥ç»“æœåº”è¯¥æ˜¯è´Ÿæ•°ï¼‰
             ^
ç¬¬ 3 æ­¥ï¼š"   -42"ï¼ˆè¯»å…¥ "42"ï¼‰
               ^
è§£æå¾—åˆ°æ•´æ•° -42 ã€‚
ç”±äº "-42" åœ¨èŒƒå›´ [-231, 231 - 1] å†…ï¼Œæœ€ç»ˆç»“æœä¸º -42 ã€‚
```

### ç¤ºä¾‹Â 3

```bash
è¾“å…¥ï¼šs = "4193 with words"
è¾“å‡ºï¼š4193
è§£é‡Šï¼š
ç¬¬ 1 æ­¥ï¼š"4193 with words"ï¼ˆå½“å‰æ²¡æœ‰è¯»å…¥å­—ç¬¦ï¼Œå› ä¸ºæ²¡æœ‰å‰å¯¼ç©ºæ ¼ï¼‰
         ^
ç¬¬ 2 æ­¥ï¼š"4193 with words"ï¼ˆå½“å‰æ²¡æœ‰è¯»å…¥å­—ç¬¦ï¼Œå› ä¸ºè¿™é‡Œä¸å­˜åœ¨ '-' æˆ–è€… '+'ï¼‰
         ^
ç¬¬ 3 æ­¥ï¼š"4193 with words"ï¼ˆè¯»å…¥ "4193"ï¼›ç”±äºä¸‹ä¸€ä¸ªå­—ç¬¦ä¸æ˜¯ä¸€ä¸ªæ•°å­—ï¼Œæ‰€ä»¥è¯»å…¥åœæ­¢ï¼‰
             ^
è§£æå¾—åˆ°æ•´æ•° 4193 ã€‚
ç”±äº "4193" åœ¨èŒƒå›´ [-231, 231 - 1] å†…ï¼Œæœ€ç»ˆç»“æœä¸º 4193 ã€‚
```

**æç¤ºï¼š**

- `0 <= s.length <= 200`
- `s`ç”±è‹±æ–‡å­—æ¯ï¼ˆå¤§å†™å’Œå°å†™ï¼‰ã€æ•°å­—ï¼ˆ`0-9`ï¼‰ã€`' '`ã€`'+'`ã€`'-'` å’Œ `'.'` ç»„æˆ

## è§£æ³•

### è§£æ³•ä¸€

**æ€è·¯ï¼š** ç›´æ¥è®²å­—ç¬¦ä¸²apiè½¬åŒ–ï¼Œç„¶ååˆ¤æ–­æ˜¯ä¸æ˜¯æ•°å­—ä»¥åŠæ˜¯å¦è¶…è¿‡32ä½æ•´æ•°èŒƒå›´

javascript

```js
/**
 * @param {string} str
 * @return {number}
 */

var myAtoi = function(str){
    let res  = parseInt(str)
    if(isNaN(res)){
        res =  0;
    }else if(res >= Math.pow(2,31)-1){
        res =  Math.pow(2,31)-1
    }else if (res <= Math.pow(-2,31)){
        res =  Math.pow(-2,31)
    }else {
        res =  res
    }
    return res
}

```

typescript

```ts
function myAtoi(s: string): number {
    let res:number= parseInt(s)
    if(isNaN(res)) return 0
    if(res > Math.pow(2,31)-1) return Math.pow(2,31)-1
    if(res < Math.pow(-2,31)) return Math.pow(-2,31)
    return res
};

```

### è§£æ³•äºŒ çŠ¶æ€æœº

**æ€è·¯ï¼š** å­—ç¬¦ä¸²çš„å¤„ç†ä¸å½“æ—¶ ä¼šæ˜¾å¾—å¾ˆè‡ƒè‚¿ï¼Œä¸ºäº†ç®€åŒ–å¹¶æœ‰æ¡ç†çš„åˆ†æï¼Œæœ¬é¢˜å¯ä»¥é‡‡ç”¨çŠ¶æ€æœºæ¥å¤„ç†ï¼›
æˆ‘ä»¬çš„ç¨‹åºåœ¨æ¯ä¸ªæ—¶åˆ»æœ‰ä¸€ä¸ªçŠ¶æ€ `s`ï¼Œæ¯æ¬¡ä»åºåˆ—ä¸­è¾“å…¥ä¸€ä¸ªå­—ç¬¦ `c`ï¼Œå¹¶æ ¹æ®å­—ç¬¦ `c `è½¬ç§»åˆ°ä¸‹ä¸€ä¸ªçŠ¶æ€ `s'`ã€‚è¿™æ ·ï¼Œæˆ‘ä»¬åªéœ€è¦å»ºç«‹ä¸€ä¸ªè¦†ç›–æ‰€æœ‰æƒ…å†µçš„ä» `s `ä¸ `c` æ˜ å°„åˆ° `s'` çš„è¡¨æ ¼å³å¯è§£å†³é¢˜ç›®ä¸­çš„é—®é¢˜ã€‚
**ç®—æ³•ï¼š**
<img src = 'https://assets.leetcode-cn.com/solution-static/8/fig1.png' width = '300px'>

æˆ‘ä»¬ä¹Ÿå¯ä»¥ç”¨ä¸‹é¢çš„è¡¨æ ¼æ¥è¡¨ç¤ºè¿™ä¸ªçŠ¶æ€æœºï¼š

|        | ' '  |  +/-  | number  | other|
|  ----  | ----  |  ----  | ----  | ---- |
|  start  | start  |  signed  | in_number  | end |
|  signed  | end  |  end  | in_number  | end |	
|  start  | end  |  end  | in_number  | end |	
|  start  | end  |  end  | end  | end |	



javascript

```js
/**
 * @param {string} str
 * @return {number}
 */

var myAtoi = function(str) {
  // è‡ªåŠ¨æœºç±»
  class Automaton{
    constructor() {
      // æ‰§è¡Œé˜¶æ®µï¼Œé»˜è®¤å¤„äºå¼€å§‹æ‰§è¡Œé˜¶æ®µ
      this.state = 'start';
      // æ­£è´Ÿç¬¦å·ï¼Œé»˜è®¤æ˜¯æ­£æ•°
      this.sign = 1;
      // æ•°å€¼ï¼Œé»˜è®¤æ˜¯0
      this.answer = 0;
      /*
      å…³é”®ç‚¹ï¼š
      çŠ¶æ€å’Œæ‰§è¡Œé˜¶æ®µçš„å¯¹åº”è¡¨
      å«ä¹‰å¦‚ä¸‹ï¼š
      [æ‰§è¡Œé˜¶æ®µ, [ç©ºæ ¼, æ­£è´Ÿ, æ•°å€¼, å…¶ä»–]]
      */
      this.map = new Map([
        ['start', ['start', 'signed', 'in_number', 'end']],
        ['signed', ['end', 'end', 'in_number', 'end']],
        ['in_number', ['end', 'end', 'in_number', 'end']],
        ['end', ['end', 'end', 'end', 'end']]
      ])
    }

    // è·å–çŠ¶æ€çš„ç´¢å¼•
    getIndex(char) {
      if (char === ' ') {
        // ç©ºæ ¼åˆ¤æ–­
        return 0;
      } else if (char === '-' || char === '+') {
        // æ­£è´Ÿåˆ¤æ–­
        return 1;
      } else if (typeof Number(char) === 'number' && !isNaN(char)) {
        // æ•°å€¼åˆ¤æ–­
        return 2;
      } else {
        // å…¶ä»–æƒ…å†µ
        return 3;
      }
    }

    /*
    å…³é”®ç‚¹ï¼š
    å­—ç¬¦è½¬æ¢æ‰§è¡Œå‡½æ•°
    */
    get(char) {
      /*
      æ˜“é”™ç‚¹ï¼š
      æ¯æ¬¡ä¼ å…¥å­—ç¬¦æ—¶ï¼Œéƒ½è¦å˜æ›´è‡ªåŠ¨æœºçš„æ‰§è¡Œé˜¶æ®µ
      */
      this.state = this.map.get(this.state)[this.getIndex(char)];

      if(this.state === 'in_number') {
        /*
        å°æŠ€å·§ï¼š
        åœ¨JSä¸­ï¼Œå¯¹å­—ç¬¦ä¸²ç±»å‹è¿›è¡Œå‡æ³•æ“ä½œï¼Œå¯ä»¥å°†å¾—åˆ°ä¸€ä¸ªæ•°å€¼å‹ï¼ˆNumberï¼‰çš„å€¼

        æ˜“é”™ç‚¹ï¼š
        æœ¬å¤„éœ€è¦åˆ©ç”¨æ‹¬å·æ¥æé«˜å››åˆ™è¿ç®—çš„ä¼˜å…ˆçº§
        */
        this.answer = this.answer * 10 + (char - 0);

        /*
        æ˜“é”™ç‚¹ï¼š
        åœ¨è¿›è¡Œè´Ÿæ•°æ¯”è¾ƒæ—¶ï¼Œéœ€è¦å°†INT_MINå˜ä¸ºæ­£æ•°
        */
        this.answer = this.sign === 1 ? Math.min(this.answer, Math.pow(2, 31) - 1) : Math.min(this.answer, -Math.pow(-2, 31));
      } else if (this.state === 'signed') {
        /*
        ä¼˜åŒ–ç‚¹ï¼š
        å¯¹äºä¸€ä¸ªæ•´æ•°æ¥è¯´ï¼Œéæ­£å³è´Ÿï¼Œ
        æ‰€ä»¥æ­£è´Ÿå·çš„åˆ¤æ–­ï¼Œåªéœ€è¦ä¸€æ¬¡ã€‚
        æ•…ï¼Œå¯ä»¥é™ä½å…¶åˆ¤æ–­çš„ä¼˜å…ˆçº§
        */
        this.sign = char === '+' ? 1 : -1;
      }
    }
  }

  // ç”Ÿæˆè‡ªåŠ¨æœºå®ä¾‹
  let automaton = new Automaton();

  // éå†æ¯ä¸ªå­—ç¬¦
  for(let char of str) {
    // ä¾æ¬¡è¿›è¡Œè½¬æ¢
    automaton.get(char);
  }

  // è¿”å›å€¼ï¼Œæ•´æ•° = æ­£è´Ÿ * æ•°å€¼
  return automaton.sign * automaton.answer;
};

```


**å¤æ‚åº¦åˆ†æ**

- æ—¶é—´å¤æ‚åº¦ï¼šO(n)ï¼Œå…¶ä¸­ n ä¸ºå­—ç¬¦ä¸²çš„é•¿åº¦ã€‚æˆ‘ä»¬åªéœ€è¦ä¾æ¬¡å¤„ç†æ‰€æœ‰çš„å­—ç¬¦ï¼Œå¤„ç†æ¯ä¸ªå­—ç¬¦éœ€è¦çš„æ—¶é—´ä¸º O(1)ã€‚

- ç©ºé—´å¤æ‚åº¦ï¼šO(1)ã€‚è‡ªåŠ¨æœºçš„çŠ¶æ€åªéœ€è¦å¸¸æ•°ç©ºé—´å­˜å‚¨ã€‚
